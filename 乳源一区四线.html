<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>乳源一区四线物流路线分布</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<script src="https://mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js"></script>
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=duaE7gEWkw9LUCnkX1GDf4jo2nGyL84H"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
	<script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/data/points-sample-data.js"></script>
	<link rel="stylesheet" href="index.css">
</head>
<body>
	<div class="main">
		<div class="header">
			<div class="title">
			  <span>运输路线情况</span>
			</div>
		  </div>
		<div class="footer">
			<div class="left">
				<div class="bmap" id="container"></div>
			</div>
			<div class="right">
				<div class="word">
					<ul>
						<li><a href="乳源一区一线.html">乳源一区一线</a></li>
						<li><a href="乳源一区二线.html">乳源一区二线</a></li>
						<li><a href="乳源一区三线.html">乳源一区三线</a></li>
						<li><a href="乳源一区四线.html">乳源一区四线</a></li>
						<li><a href="乳源一区五线.html">乳源一区五线</a></li>
						<li><a href="乳源二区一线.html">乳源二区一线</a></li>
						<li><a href="乳源二区二线.html">乳源二区二线</a></li>
						<li><a href="乳源二区三线.html">乳源二区三线</a></li>
						<li><a href="乳源二区四线.html">乳源二区四线</a></li>
						<li><a href="乳源二区五线.html">乳源二区五线</a></li>
					</ul>	
				</div>
			</div>
		</div>	
	</div>
</body>
</html>
<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
<script src="http://www.w3school.com.cn/jquery/jquery.js" type="text/javascript"></script> 
<script>
var map = new BMapGL.Map('container');
map.centerAndZoom(new BMapGL.Point(113.3156060276958,24.763503400542863), 13);
map.enableScrollWheelZoom(true);
var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
map.addControl(scaleCtrl);
var zoomCtrl = new BMapGL.ZoomControl();  // 添加比例尺控件
map.addControl(zoomCtrl);
$(function () {
				$.ajax({
					url:'https://hcguang.cn/region/load/getOneWithFour',
					methods:'get',
					success:function (res) {
						//var copy = res;
						//console.log(res.data)
						var aac = res.data.list;
						console.log(aac);
						 //绘制点    
						for (var i = 0; i <= aac.length; i++) {  
							//var p0 = aac[i].p1;  
                            var p3 = parseFloat(aac[i].p1)+ 0.0116;
							//var p1 = aac[i].p2;  
                            var p4 = parseFloat(aac[i].p2)+0.0033;
							var maker = addMarker(new window.BMapGL.Point(p3, p4), i);  
							addInfoWindow(maker, aac[i], i);   
						}  
					},
					error:function (err) {
						console.log(err); 
					}
				})
			})

		 // 添加标注  
	function addMarker(point, index) {   
			var marker = new BMapGL.Marker(point);  
			map.addOverlay(marker);  
			return marker;  
		}  

		// 添加信息窗口  
	function addInfoWindow(marker, poi) {  
			//pop弹窗标题  
			var title = '<div style="font-weight:bold;color:#CE5521;font-size:14px">' + poi.title + '</div>';  
			//pop弹窗信息  
			var html = [];  
			html.push('<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px arial,simsun,sans-serif"><tbody>');  
			html.push('<tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:38px;white-space:nowrap;word-break:keep-all">地址:</td>');  
			html.push('<td style="vertical-align:top;line-height:16px">' + poi.address + ' </td>');  
			html.push('</tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:68px;white-space:nowrap;">客户编码：</td>');  
			html.push('<td style="vertical-align:top;line-height:16px"><span style="margin-left: 20px;">' + poi.code + ' </span></td>');  
			html.push('</tr>');  
			html.push('</tbody></table>');  
			var infoWindow = new BMapGL.InfoWindow(html.join(""), { title: title, width: 200 });  

			var openInfoWinFun = function () {  
				marker.openInfoWindow(infoWindow);  
			};  
			marker.addEventListener("click", openInfoWinFun);  
			return openInfoWinFun;  
		}  

//乳源一区四线
var path13 = [];
    var point13 = [
	 {"lng":113.3156060276958,"lat":24.763503400542863},
 {"lng":113.31654185624674,"lat":24.76274691229392},
 {"lng":113.32094485287163,"lat":24.762228575063308},
 {"lng":113.3204539264187,"lat":24.76110783843916},
 {"lng":113.32036187770875,"lat":24.760225251151308},
 {"lng":113.31947207351323,"lat":24.759020439221317},
//  {"lng":113.31109339580406,"lat":24.74927759745212},
 {"lng":113.31958718483499,"lat":24.75875791993631},
  {"lng":113.3231760342594,"lat":24.754000198737966},
 {"lng":113.32295262249005,"lat":24.75332011839749},
 {"lng":113.321289445985,"lat":24.752685373350797},
 {"lng":113.32148803422443,"lat":24.751166505823868},
 {"lng":113.3216617989339,"lat":24.749647619526257},
 {"lng":113.321289445985,"lat":24.74876348303858},
 {"lng":113.32143838716458,"lat":24.747675306323437},
 {"lng":113.3229029754302,"lat":24.74540824056077},
 {"lng":113.32260509307109,"lat":24.74456941563226},
 {"lng":113.32943156380075,"lat":24.745181531685034},
 {"lng":113.32302709307983,"lat":24.743979967663922},
 {"lng":113.32267956366087,"lat":24.744728112679326},
 {"lng":113.32138874010471,"lat":24.747743317650354},
 {"lng":113.321289445985,"lat":24.74883149376342},
 {"lng":113.32151285775436,"lat":24.749896990206263},
 {"lng":113.32136391657478,"lat":24.752776051415328},
 {"lng":113.3227043871908,"lat":24.753070754662996},
 {"lng":113.3232753283791,"lat":24.753909521576684},
 {"lng":113.31954173501028,"lat":24.758652215730248},
 {"lng":113.31115138189534,"lat":24.749289800073768},
 {"lng":113.29953396989004,"lat":24.745027737833027},
 {"lng":113.31107691130566,"lat":24.749335140367048},
 {"lng":113.31964102913007,"lat":24.758765557796583},
 {"lng":113.31954173501036,"lat":24.759060246679617},
 {"lng":113.3204353820877,"lat":24.76023899514335},
 {"lng":113.32041055855777,"lat":24.761055045146865},
 {"lng":113.32103114680592,"lat":24.76236978097265},
 {"lng":113.33109021838915,"lat":24.761182249336642},
  {"lng":113.33434210080945,"lat":24.759248710956363},
 {"lng":113.33776774793925,"lat":24.75947539388383},
 {"lng":113.34280692451411,"lat":24.756596489632},
 {"lng":113.35211574823637,"lat":24.753604171203396},
 {"lng":113.35703080716162,"lat":24.756052437155734},
 {"lng":113.36105221900964,"lat":24.757185877096138},
 {"lng":113.36601692499472,"lat":24.759747412844654},
 {"lng":113.37924786644531,"lat":24.76255824017224},
 {"lng":113.36586798381516,"lat":24.75981541749076},
 {"lng":113.36157351313807,"lat":24.75748056976804},
 {"lng":113.35737833658055,"lat":24.756143112735728},
 {"lng":113.35338174826256,"lat":24.753830864544415},
 {"lng":113.35139586586848,"lat":24.753626840556326},
 {"lng":113.34288139510389,"lat":24.756596489631967},
 {"lng":113.33779257146904,"lat":24.75943005733178},
//  {"lng":113.33414351257007,"lat":24.75929404757526},
 {"lng":113.3347310800732,"lat":24.759159018172088},
 {"lng":113.33322656340802,"lat":24.75967422706606},
 {"lng":113.33422957451813,"lat":24.763738577029077},
 {"lng":113.33426091861536,"lat":24.76692441746354},
 {"lng":113.33658038180752,"lat":24.76861304290479},
 {"lng":113.33607887625251,"lat":24.77199022412937},
 {"lng":113.33738535019219,"lat":24.77347693509768},
 {"lng":113.33720863837134,"lat":24.773960986366934},
 {"lng":113.33899182129095,"lat":24.7778626632703},
 {"lng":113.33746567374713,"lat":24.778669385504987},
 {"lng":113.33894362715799,"lat":24.777818660086826},
 {"lng":113.33720863837134,"lat":24.773887645388193},
 {"lng":113.32962050062812,"lat":24.78099364557983},
 {"lng":113.32396451032999,"lat":24.77421939966448},
 {"lng":113.32280477873391,"lat":24.773790109913588},
 {"lng":113.31985843359793,"lat":24.777968466356082},
 {"lng":113.32277343463672,"lat":24.773618393592937},
 {"lng":113.31960768082031,"lat":24.770441598342984},
 {"lng":113.31731956172534,"lat":24.76274253740628},
 {"lng":113.31641058290678,"lat":24.7629142689348},
 {"lng":113.30772826798486,"lat":24.770527458754724},
 {"lng":113.30572224576461,"lat":24.772702569160106},
 {"lng":113.30409235271068,"lat":24.774734545384195},
 {"lng":113.30183557771291,"lat":24.770241257148786},
 {"lng":113.30293262111441,"lat":24.772588090625707},
 {"lng":113.2989832648683,"lat":24.774190780394477},
 {"lng":113.2975414363975,"lat":24.775879305911367},
 {"lng":113.2939368652203,"lat":24.7777681374437},
 {"lng":113.2950025645248,"lat":24.779628321910486},
  {"lng":113.29394907840137,"lat":24.779994656035175},

	];
    for (var i = 0; i < path13.length; i++) {
        point13.push(new BMapGL.Point(path13[i].lng, path13[i].lat));
    }
    var p9 = new BMapGL.Polyline(point13);
    setTimeout('start()', 3000);
    function start () {
        trackAni = new BMapGLLib.TrackAnimation(map, p9, {
            overallView: true,
            tilt: 30,
            duration: 50000,
            delay: 300
        });
        trackAni.start();
    }
</script>