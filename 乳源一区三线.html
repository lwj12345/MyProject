<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>乳源一区三线物流路线分布</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<script src="https://mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js"></script>
   
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=duaE7gEWkw9LUCnkX1GDf4jo2nGyL84H"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
	<script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/data/points-sample-data.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>
	<div class="main">
		<div class="header">
			<div class="title">
			  <span>运输路线情况</span>
			</div>
		  </div>
		<div class="footer">
			<div class="left">
				<div class="bmap" id="container"></div>
			</div>
			<div class="right">
				<div class="word">
					<ul>
						<li><a href="乳源一区一线.html">乳源一区一线</a></li>
						<li><a href="乳源一区二线.html">乳源一区二线</a></li>
						<li><a href="乳源一区三线.html">乳源一区三线</a></li>
						<li><a href="乳源一区四线.html">乳源一区四线</a></li>
						<li><a href="乳源一区五线.html">乳源一区五线</a></li>
						<li><a href="乳源二区一线.html">乳源二区一线</a></li>
						<li><a href="乳源二区二线.html">乳源二区二线</a></li>
						<li><a href="乳源二区三线.html">乳源二区三线</a></li>
						<li><a href="乳源二区四线.html">乳源二区四线</a></li>
						<li><a href="乳源二区五线.html">乳源二区五线</a></li>
					</ul>	
				</div>
			</div>
		</div>	
	</div>
</body>
</html>
<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
<script src="http://www.w3school.com.cn/jquery/jquery.js" type="text/javascript"></script> 
<script>
var map = new BMapGL.Map('container');
map.centerAndZoom(new BMapGL.Point(113.19987033889804,24.83417272247303), 13);
map.enableScrollWheelZoom(true);
var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
map.addControl(scaleCtrl);
var zoomCtrl = new BMapGL.ZoomControl();  // 添加比例尺控件
map.addControl(zoomCtrl);

$(function () {
				$.ajax({
					url:'https://hcguang.cn/region/load/getOneWithThree',
					methods:'get',
					success:function (res) {
						//var copy = res;
						//console.log(res.data)
						var aac = res.data.list;
						console.log(aac);
						 //绘制点    
						for (var i = 0; i <= aac.length; i++) {  
							//var p0 = aac[i].p1;  
                            var p3 = parseFloat(aac[i].p1)+ 0.0116;
							//var p1 = aac[i].p2;  
                            var p4 = parseFloat(aac[i].p2)+0.0033;
							var maker = addMarker(new window.BMapGL.Point(p3, p4), i);  
							addInfoWindow(maker, aac[i], i);   
						}  
					},
					error:function (err) {
						console.log(err); 
					}
				})
			})

		 // 添加标注  
	function addMarker(point, index) {   
			var marker = new BMapGL.Marker(point);  
			map.addOverlay(marker);  
			return marker;  
		}  

		// 添加信息窗口  
	function addInfoWindow(marker, poi) {  
			//pop弹窗标题  
			var title = '<div style="font-weight:bold;color:#CE5521;font-size:14px">' + poi.title + '</div>';  
			//pop弹窗信息  
			var html = [];  
			html.push('<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px arial,simsun,sans-serif"><tbody>');  
			html.push('<tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:38px;white-space:nowrap;word-break:keep-all">地址:</td>');  
			html.push('<td style="vertical-align:top;line-height:16px">' + poi.address + ' </td>');  
			html.push('</tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:68px;white-space:nowrap;">客户编码：</td>');  
			html.push('<td style="vertical-align:top;line-height:16px"><span style="margin-left: 20px;">' + poi.code + ' </span></td>');  
			html.push('</tr>');  
			html.push('</tbody></table>');  
			var infoWindow = new BMapGL.InfoWindow(html.join(""), { title: title, width: 200 });  

			var openInfoWinFun = function () {  
				marker.openInfoWindow(infoWindow);  
			};  
			marker.addEventListener("click", openInfoWinFun);  
			return openInfoWinFun;  
		}  

//乳源一区三线
var path13 = [];
    var point13 = [
	{"lng":113.19987033889804,"lat":24.83417272247303},
  {"lng":113.19836118564177,"lat":24.837189594594232},
  {"lng":113.19713949014861,"lat":24.837845426522396},
  {"lng":113.18880321501877,"lat":24.83614025620131},
  {"lng":113.18780317056441,"lat":24.839678890711408},
  {"lng":113.18676008788525,"lat":24.840111570015768},
  {"lng":113.18476874822504,"lat":24.838164501102156},
  {"lng":113.18419979403642,"lat":24.838467380522793},
  {"lng":113.1841049683383,"lat":24.8496733922126},
  {"lng":113.18296705996087,"lat":24.850928055509478},
  {"lng":113.18287223426277,"lat":24.851317431157916},
  {"lng":113.18576441805499,"lat":24.861527283593354},
  {"lng":113.18514805101728,"lat":24.864555465761455},
  {"lng":113.18178173873454,"lat":24.869789718074394},
  {"lng":113.18163950018717,"lat":24.870395319579423},
  {"lng":113.1820188029796,"lat":24.87541304519534},
  {"lng":113.17988522477208,"lat":24.878008339678527},
  {"lng":113.17751458231946,"lat":24.882463466675336},
  {"lng":113.17362578985961,"lat":24.883503244096445},
  {"lng":113.17277235857668,"lat":24.883935768365102},
  {"lng":113.17002241333162,"lat":24.88761216281692},
  {"lng":113.17182410159562,"lat":24.89154794481813},
  {"lng":113.17196634014277,"lat":24.892931925927595},
  {"lng":113.17149221165224,"lat":24.89552684822989},
  {"lng":113.17495334963334,"lat":24.904046455305195},
  {"lng":113.1744792211428,"lat":24.905257315661384},
  {"lng":113.16627679825672,"lat":24.908630363305235},
  {"lng":113.16328978876642,"lat":24.91204656011206},
  {"lng":113.14023410391145,"lat":24.932853489628094},
  {"lng":113.13852724134557,"lat":24.93709044742266},
  {"lng":113.14047116815671,"lat":24.95351962121147},
  {"lng":113.14304539669536,"lat":24.959566232791623},
  {"lng":113.14868752573261,"lat":24.966568568023007},
  {"lng":113.15181677377022,"lat":24.974132366386687},
  {"lng":113.1513426452797,"lat":24.976379804427964},
  {"lng":113.14797633299696,"lat":24.978886513260253},
  {"lng":113.14916165422329,"lat":24.987400293733856},
  {"lng":113.14950340953594,"lat":24.988582402066406},
  {"lng":113.15073614361131,"lat":24.988539186831964},
  {"lng":113.15211111623384,"lat":24.989144198716357},
  {"lng":113.1542446944412,"lat":24.991002430679252},
  {"lng":113.15481364862984,"lat":24.9922340338869},
  {"lng":113.15301196036584,"lat":24.99448113741066},
  {"lng":113.15296454751687,"lat":24.995518248102908},
  {"lng":113.15244300617728,"lat":24.99683623017181},
  {"lng":113.15217096291062,"lat":24.99501845482885},
  {"lng":113.15292739344989,"lat":25.00264497566522},
  {"lng":113.15292420125455,"lat":25.04133689050099},
  {"lng":113.14888359957764,"lat":25.05303578425165},
  {"lng":113.14925413947769,"lat":25.06054616087722},
  {"lng":113.1482351547526,"lat":25.0637526967603},
  {"lng":113.14554874047738,"lat":25.067127906018722},
  {"lng":113.14165807152705,"lat":25.068562341480423},
  {"lng":113.14026854690194,"lat":25.06991238286986},
  {"lng":113.1385084823771,"lat":25.067549800564688},
  {"lng":113.13193139915155,"lat":25.063330788991937},
  {"lng":113.12544695090102,"lat":25.060630544487527},
  {"lng":113.12896707995131,"lat":25.05379528168964},
  {"lng":113.1337840986517,"lat":25.035819232891946},
  {"lng":113.13693368780183,"lat":25.012353528292614},
  {"lng":113.1367484178518,"lat":25.004333632650905},
  {"lng":113.13517362327667,"lat":25.002982861289034},
  {"lng":113.13526625825168,"lat":25.00011242228439},
  {"lng":113.13341355875153,"lat":24.99454020006982},
  {"lng":113.13026396960127,"lat":24.992513874106326},
  {"lng":113.12396479130082,"lat":24.996482064086607},
  {"lng":113.11905513762542,"lat":24.997495198213876},
  {"lng":113.11377494404991,"lat":24.994709059041995},
  {"lng":113.10951373519956,"lat":24.987870083041884},
  {"lng":113.11090325982468,"lat":24.98457710553533},
  {"lng":113.10562306624924,"lat":24.976555376912554},
  {"lng":113.10173239729914,"lat":24.95054445115475},
  {"lng":113.0916351850236,"lat":24.921740159479565},
  {"lng":113.10302928694954,"lat":24.953247143722873},
  {"lng":113.11859343311612,"lat":24.948688996478932},
  {"lng":113.13146969464216,"lat":24.960681919982413},
  {"lng":113.13637934831758,"lat":24.960513013768317},
  {"lng":113.14128900199297,"lat":24.956881473482923},
  {"lng":113.13869522269262,"lat":24.93576572196283},
  {"lng":113.16704408284764,"lat":24.90839193133505},
  {"lng":113.18668269754926,"lat":24.905688244138585},
  {"lng":113.18686796749932,"lat":24.8887043393762},
  {"lng":113.19103654137466,"lat":24.88126785645373},
  {"lng":113.19798416450024,"lat":24.8813523644844},
  {"lng":113.20344962802568,"lat":24.88650724381383},
  {"lng":113.20511705757582,"lat":24.89216890976651},
  {"lng":113.20696975707595,"lat":24.88540868121224},
  {"lng":113.21419528512655,"lat":24.877633955840054},
  {"lng":113.20178219847564,"lat":24.857265210685014},
  {"lng":113.20104111867556,"lat":24.851179284139707},
  {"lng":113.20428334280084,"lat":24.839429208447072},
  {"lng":113.19955895907562,"lat":24.83477958643166},
	];
    for (var i = 0; i < path13.length; i++) {
        point13.push(new BMapGL.Point(path13[i].lng, path13[i].lat));
    }
    var p9 = new BMapGL.Polyline(point13);
    setTimeout('start()', 3000);
    function start () {
        trackAni = new BMapGLLib.TrackAnimation(map, p9, {
            overallView: true,
            tilt: 30,
            duration: 20000,
            delay: 300
        });
        trackAni.start();
    }
</script>