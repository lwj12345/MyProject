<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>乳源一区五线物流路线分布</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<script src="https://mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js"></script>
  
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=duaE7gEWkw9LUCnkX1GDf4jo2nGyL84H"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
	<script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/data/points-sample-data.js"></script>
	<link rel="stylesheet" href="index.css">
</head>
<body>
	<div class="main">
		<div class="header">
			<div class="title">
			  <span>运输路线情况</span>
			</div>
		  </div>
		<div class="footer">
			<div class="left">
				<div class="bmap" id="container"></div>
			</div>
			<div class="right">
				<div class="word">
					<ul>
						<li><a href="乳源一区一线.html">乳源一区一线</a></li>
						<li><a href="乳源一区二线.html">乳源一区二线</a></li>
						<li><a href="乳源一区三线.html">乳源一区三线</a></li>
						<li><a href="乳源一区四线.html">乳源一区四线</a></li>
						<li><a href="乳源一区五线.html">乳源一区五线</a></li>
						<li><a href="乳源二区一线.html">乳源二区一线</a></li>
						<li><a href="乳源二区二线.html">乳源二区二线</a></li>
						<li><a href="乳源二区三线.html">乳源二区三线</a></li>
						<li><a href="乳源二区四线.html">乳源二区四线</a></li>
						<li><a href="乳源二区五线.html">乳源二区五线</a></li>
					</ul>	
				</div>
			</div>
		</div>	
	</div>
</body>
</html>
<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
<script src="http://www.w3school.com.cn/jquery/jquery.js" type="text/javascript"></script> 
<script>
var map = new BMapGL.Map('container');
map.centerAndZoom(new BMapGL.Point(113.27930152225466,24.779592964298097), 13);
map.enableScrollWheelZoom(true);
var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
map.addControl(scaleCtrl);
var zoomCtrl = new BMapGL.ZoomControl();  // 添加比例尺控件
map.addControl(zoomCtrl);
$(function () {
				$.ajax({
					url:'https://hcguang.cn/region/load/getOneWithFive',
					methods:'get',
					success:function (res) {
						//var copy = res;
						//console.log(res.data)
						var aac = res.data.list;
						console.log(aac);
						 //绘制点    
						for (var i = 0; i <= aac.length; i++) {  
							//var p0 = aac[i].p1;  
                            var p3 = parseFloat(aac[i].p1)+ 0.0116;
							//var p1 = aac[i].p2;  
                            var p4 = parseFloat(aac[i].p2)+0.0033;
							var maker = addMarker(new window.BMapGL.Point(p3, p4), i);  
							addInfoWindow(maker, aac[i], i);   
						}  
					},
					error:function (err) {
						console.log(err); 
					}
				})
			})

		 // 添加标注  
	function addMarker(point, index) {   
			var marker = new BMapGL.Marker(point);  
			map.addOverlay(marker);  
			return marker;  
		}  

		// 添加信息窗口  
	function addInfoWindow(marker, poi) {  
			//pop弹窗标题  
			var title = '<div style="font-weight:bold;color:#CE5521;font-size:14px">' + poi.title + '</div>';  
			//pop弹窗信息  
			var html = [];  
			html.push('<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px arial,simsun,sans-serif"><tbody>');  
			html.push('<tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:38px;white-space:nowrap;word-break:keep-all">地址:</td>');  
			html.push('<td style="vertical-align:top;line-height:16px">' + poi.address + ' </td>');  
			html.push('</tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:68px;white-space:nowrap;">客户编码：</td>');  
			html.push('<td style="vertical-align:top;line-height:16px"><span style="margin-left: 20px;">' + poi.code + ' </span></td>');  
			html.push('</tr>');  
			html.push('</tbody></table>');  
			var infoWindow = new BMapGL.InfoWindow(html.join(""), { title: title, width: 200 });  

			var openInfoWinFun = function () {  
				marker.openInfoWindow(infoWindow);  
			};  
			marker.addEventListener("click", openInfoWinFun);  
			return openInfoWinFun;  
		}  

//乳源一区五线
var path13 = [];
    var point13 = [
     {"lng":113.27831882090523,"lat":24.776179938865926},
 {"lng":113.2799157105981,"lat":24.778493160427935},
 {"lng":113.28152795499955,"lat":24.77925020528978},
 {"lng":113.27988500118093,"lat":24.780568012985352},
 {"lng":113.27930152225466,"lat":24.779881072441313},
 {"lng":113.27391201954124,"lat":24.777091213169705},
 {"lng":113.27409627604426,"lat":24.77637621390294},
 {"lng":113.26394636866999,"lat":24.771448817408604},
 {"lng":113.26340127938352,"lat":24.780090644645735},
 {"lng":113.25775217223254,"lat":24.779592964298097},
 {"lng":113.25879279723404,"lat":24.776199635418887},
 {"lng":113.25522494008607,"lat":24.770181901559752},
 {"lng":113.2422220257197,"lat":24.770076458586328},
 {"lng":113.21777585507813,"lat":24.743933733664633},
 {"lng":113.21723975484475,"lat":24.743444116478024},
 {"lng":113.21273651288445,"lat":24.745696339391408},
 {"lng":113.20094230775028,"lat":24.738351982156587},
 {"lng":113.20094230775028,"lat":24.73482653487101},
 {"lng":113.19665350588335,"lat":24.739429182002787},
 {"lng":113.19000586298955,"lat":24.7421711026677},
 {"lng":113.17456617626846,"lat":24.733847226024018},
 {"lng":113.1752094965485,"lat":24.73012578129771},
 {"lng":113.172743435475,"lat":24.726991845788547},
 {"lng":113.16320085132098,"lat":24.72855882352188},
  {"lng":113.15985084160732,"lat":24.729769049038136},
 {"lng":113.14432290111867,"lat":24.719075504875274},
 {"lng":113.13155909663331,"lat":24.697239967531267},
 {"lng":113.1182262053237,"lat":24.6956058600748},
  {"lng":113.08555779422674,"lat":24.68225709863705},
 {"lng":113.0764283315513,"lat":24.684124706697574},
 {"lng":113.05285524135947,"lat":24.677650211132693},
 {"lng":113.04236317231455,"lat":24.692466343929127},
 {"lng":113.05258272008554,"lat":24.67814826132293},
 {"lng":113.0773821560099,"lat":24.68362668064772},
 {"lng":113.08705666123313,"lat":24.682132590427113},
 {"lng":113.11962295346348,"lat":24.694582788951724},
 {"lng":113.08787422505482,"lat":24.645646271288676},
 {"lng":113.09019065588292,"lat":24.641536214816416},
 {"lng":113.06675382632804,"lat":24.626838530532723},
 {"lng":113.05645490246145,"lat":24.607304170310442},
 {"lng":113.04897938866053,"lat":24.582597257579682},
 {"lng":113.03727075258674,"lat":24.571477538385484},
 {"lng":113.03141643454985,"lat":24.570159579590936},
 {"lng":113.03817141690011,"lat":24.57180702589398},
 {"lng":113.05069065085593,"lat":24.584326901968105},
 {"lng":113.05703373638352,"lat":24.605186176784883},
 {"lng":113.06811190743797,"lat":24.62552484723523},
 {"lng":113.06721124312459,"lat":24.611938656886093},
 {"lng":113.06658077810523,"lat":24.60469207840455},
 {"lng":113.07036356822138,"lat":24.600080398378207},
 {"lng":113.06811190743791,"lat":24.5799846442939},
 {"lng":113.070543701084,"lat":24.572571452718563},
 {"lng":113.07756888272829,"lat":24.57603099732021},
 {"lng":113.12303389452326,"lat":24.562368257088202},
 {"lng":113.1292133917073,"lat":24.562982602668555},
 {"lng":113.1488265784218,"lat":24.545411117699768},
 {"lng":113.1359116699155,"lat":24.537053388209756},
 {"lng":113.13838528036908,"lat":24.532244443329184},
 {"lng":113.13538679979642,"lat":24.52900037469712},
 {"lng":113.13767912036802,"lat":24.529332104400815},
 {"lng":113.13838214412192,"lat":24.53224278054108},
 {"lng":113.1357347636515,"lat":24.53722745063734},
 {"lng":113.13976740134481,"lat":24.539226894818004},
 {"lng":113.14219929735835,"lat":24.5417895156099},
 {"lng":113.14891009901591,"lat":24.545196874476712},
{"lng":113.15023816737829,"lat":24.543694011389423},
{"lng":113.14927811108493,"lat":24.544714194124214},
];
    for (var i = 0; i < path13.length; i++) {
        point13.push(new BMapGL.Point(path13[i].lng, path13[i].lat));
    }
    var p9 = new BMapGL.Polyline(point13);
    setTimeout('start()', 3000);
    function start () {
        trackAni = new BMapGLLib.TrackAnimation(map, p9, {
            overallView: true,
            tilt: 30,
            duration: 20000,
            delay: 300
        });
        trackAni.start();
    }
</script>