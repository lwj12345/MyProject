<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>乳源乳源二区五线物流路线分布</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<script src="https://mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js"></script>
  
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=duaE7gEWkw9LUCnkX1GDf4jo2nGyL84H"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
	<script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/data/points-sample-data.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>
	<div class="main">
		<div class="header">
			<div class="title">
			  <span>运输路线情况</span>
			</div>
		  </div>
		<div class="footer">
			<div class="left">
				<div class="bmap" id="container"></div>
			</div>
			<div class="right">
				<div class="word">
					<ul>
						<!-- <li><a href="乳源一区一线.html">乳源一区一线</a></li>
						<li><a href="乳源一区二线.html">乳源一区二线</a></li>
						<li><a href="乳源一区三线.html">乳源一区三线</a></li>
						<li><a href="乳源一区四线.html">乳源一区四线</a></li>
						<li><a href="乳源一区五线.html">乳源一区五线</a></li> -->
						<li><a href="乳源二区一线.html">乳源二区一线</a></li>
						<li><a href="乳源二区二线.html">乳源二区二线</a></li>
						<li><a href="乳源二区三线.html">乳源二区三线</a></li>
						<li><a href="乳源二区四线.html">乳源二区四线</a></li>
						<li><a href="乳源二区五线.html">乳源二区五线</a></li>
					</ul>	
				</div>
				<div class="address">
					<form>
						<input type="checkbox" name="vehicle" value="Bike">城素商行

						<br>
						<input type="checkbox" name="vehicle" value="Bike">云山土特产店

						<br>
						<input type="checkbox" name="vehicle" value="Bike">盛元装饰工程部

						<br>
						<input type="checkbox" name="vehicle" value="Bike">美宜佳富华城店


						<br>
						<input type="checkbox" name="vehicle" value="Bike">富利源综合商店

						<br>
						<input type="checkbox" name="vehicle" value="Bike">富华源商行


						<br>
						<input type="checkbox" name="vehicle" value="Bike">华景雅苑美宜佳便利店

						<br>
						<input type="checkbox" name="vehicle" value="Bike">惠源福生活便利店

						<br>
						<input type="checkbox" name="vehicle" value="Bike">林禄记古茶坊

						<br>
						<input type="checkbox" name="vehicle" value="Bike">益邻便利店

						<br>
						</form>
					<button id="btn" onclick="threeFn()">生成路线</button>
				</div>
			</div>
		</div>	
	</div>
</body>
</html>
<!-- <script type="text/javascript" src="js/jquery.js"></script> -->
<script src="http://www.w3school.com.cn/jquery/jquery.js" type="text/javascript"></script> 
<script>
var map = new BMapGL.Map('container');
map.centerAndZoom(new BMapGL.Point(113.3018183391872,24.768171811934835), 15);
map.enableScrollWheelZoom(true);
var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
map.addControl(scaleCtrl);
var zoomCtrl = new BMapGL.ZoomControl();  // 添加比例尺控件
map.addControl(zoomCtrl);

$(function () {
				$.ajax({
					url:'https://hcguang.cn/region/load/getTwoWithFive',
					methods:'get',
					success:function (res) {
						//var copy = res;
						//console.log(res.data)
						var aac = res.data.list;
						console.log(aac);
						 //绘制点    
						for (var i = 0; i <= aac.length; i++) {  
							//var p0 = aac[i].p1;  
                            var p3 = parseFloat(aac[i].p1)+ 0.0116;
							//var p1 = aac[i].p2;  
                            var p4 = parseFloat(aac[i].p2)+0.0033;
							var maker = addMarker(new window.BMapGL.Point(p3, p4), i);  
							addInfoWindow(maker, aac[i], i);   
						}  
					},
					error:function (err) {
						console.log(err); 
					}
				})
			})

		 // 添加标注  
	function addMarker(point, index) {   
			var marker = new BMapGL.Marker(point);  
			map.addOverlay(marker);  
			return marker;  
		}  

		// 添加信息窗口  
	function addInfoWindow(marker, poi) {  
			//pop弹窗标题  
			var title = '<div style="font-weight:bold;color:#CE5521;font-size:14px">' + poi.title + '</div>';  
			//pop弹窗信息  
			var html = [];  
			html.push('<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px arial,simsun,sans-serif"><tbody>');  
			html.push('<tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:38px;white-space:nowrap;word-break:keep-all">地址:</td>');  
			html.push('<td style="vertical-align:top;line-height:16px">' + poi.address + ' </td>');  
			html.push('</tr>');  
			html.push('<td style="vertical-align:top;line-height:16px;width:68px;white-space:nowrap;">客户编码：</td>');  
			html.push('<td style="vertical-align:top;line-height:16px"><span style="margin-left: 20px;">' + poi.code + ' </span></td>');  
			html.push('</tr>');  
			html.push('</tbody></table>');  
			var infoWindow = new BMapGL.InfoWindow(html.join(""), { title: title, width: 200 });  

			var openInfoWinFun = function () {  
				marker.openInfoWindow(infoWindow);  
			};  
			marker.addEventListener("click", openInfoWinFun);  
			return openInfoWinFun;  
		}  

//乳源二区四线
var path13 = [];
    var point13 = [
	{"lng":113.3018183391872,"lat":24.768171811934835},
  {"lng":113.28985004364637,"lat":24.77464511956167},
  {"lng":113.28060841739914,"lat":24.775685440741608},
  {"lng":113.28146295133297,"lat":24.773315807447737},
  {"lng":113.28057676799418,"lat":24.775772133775337},
  {"lng":113.28493575226302,"lat":24.775334984713226},
  {"lng":113.28525773029875,"lat":24.77839680031756},
  {"lng":113.28543032708487,"lat":24.77956744176166},
  {"lng":113.28284137529323,"lat":24.779950149042946},
  {"lng":113.28041467170901,"lat":24.781402462368835},
  {"lng":113.28091110760748,"lat":24.783176610531914},
  {"lng":113.28370533252169,"lat":24.781907514457192},
  {"lng":113.28090905245035,"lat":24.783186579320137},
  {"lng":113.2814296074783,"lat":24.784270777362416},
  {"lng":113.28175495437065,"lat":24.784746039237955},
  {"lng":113.28212910329685,"lat":24.788681730906696},
  {"lng":113.28242191550008,"lat":24.78878569086205},
  {"lng":113.28208030126312,"lat":24.78918667843623},
  {"lng":113.28212910329698,"lat":24.78865202804609},
  {"lng":113.28170615233692,"lat":24.78476089114188},
  {"lng":113.28139595202909,"lat":24.784236562481265},
  {"lng":113.28302380725094,"lat":24.785072780709648},
  {"lng":113.28586128270932,"lat":24.784497492508343},
  {"lng":113.28760590029538,"lat":24.783448557983387},
  {"lng":113.28841438161574,"lat":24.783111861049886},
  {"lng":113.29008807978771,"lat":24.783215460204733},
  {"lng":113.29140718088964,"lat":24.782555014094243},
  {"lng":113.29303832741317,"lat":24.782166514721936},
  {"lng":113.29408208245306,"lat":24.785723013737094},
  {"lng":113.29670058643056,"lat":24.784997979612218},
  {"lng":113.29738125645584,"lat":24.78744060796295},
  {"lng":113.30485063547795,"lat":24.785337259585628},
  {"lng":113.3058652621306,"lat":24.78648979147843},
  {"lng":113.3057944742246,"lat":24.78717915117504},
  {"lng":113.30587706011491,"lat":24.786392849960492},
  {"lng":113.30489782741529,"lat":24.785369573711428},
  {"lng":113.29737914628922,"lat":24.787414217676858},
  {"lng":113.29668875914479,"lat":24.784994284024705},
  {"lng":113.29409980735316,"lat":24.785725896906104},
  {"lng":113.29438335921604,"lat":24.78670512578255},
    {"lng":113.29251217938376,"lat":24.78036477829304},
  {"lng":113.28958073935762,"lat":24.780338918698895},
  {"lng":113.28946744698946,"lat":24.780067392631494},
  {"lng":113.2890001159708,"lat":24.779860515224588},
  {"lng":113.28544556791977,"lat":24.779588988098876},
  {"lng":113.28288232808985,"lat":24.779912234609046},
  {"lng":113.28040405753633,"lat":24.781347438833173},
  {"lng":113.27985175724156,"lat":24.780545795299492},
  {"lng":113.2783506333633,"lat":24.781722399333926},
  {"lng":113.27747261751007,"lat":24.78207149946001},
  {"lng":113.27616975527621,"lat":24.782330091505795},
  {"lng":113.27718938658965,"lat":24.782097358689107},
  {"lng":113.27832231027125,"lat":24.781722399333926},
	];
    for (var i = 0; i < path13.length; i++) {
        point13.push(new BMapGL.Point(path13[i].lng, path13[i].lat));
    }
    var p9 = new BMapGL.Polyline(point13);
	var btn = document.getElementById("btn");
	btn.addEventListener('click', function start(){
		trackAni = new BMapGLLib.TrackAnimation(map, p9, {
            overallView: true,
            tilt: 30,
            duration: 20000,
            delay: 300
        });
		p9 = p9
        trackAni.start();
        })
</script>